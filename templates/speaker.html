<% slug = slug(@p) %>
---
title: <%= name(@p) %>
kind: speaker
name: <%= name(@p) %>
slug: <%= slug %>
first_name: <%= @p.first_name %>
last_name: <%= @p.last_name %>
person_id: <%= @p.person_id %>
---
<%% photo = $item_by_id["/schedule/speaker_photos/#{@item[:slug]}/"] %>
<%% if photo %>
<img src="<%%= photo.path %>" width="<%%= photo[:width] %>" height="<%%= photo[:height] %>"/>
<%% end %>

<% if @p.abstract or @p.description %>
<h3>Bio</h3>
<% if @p.abstract %>
<%= markup(@p.abstract) %>
<% end %>
<% if @p.description %>
<%= markup(@p.description) %>
<% end %>
<% end %>

<% unless @p.links.nil? or @p.links.empty? %>
<h3>Links</h3>
<ul>
    <% @p.links.select{|l| l['url']}.each do |l| %>
    <li><a href="<%= l['url'] %>"<% if l['title'] %> title="<%= l['title'] %>"<% end %>><%= l['title'] ? l['title'] : l['url'] %></a></li>
    <% end %>
</ul>
<% end %>

<% unless @events.empty? %>
<h3>Sessions</h3>
<table class="table table-striped table-bordered table-condensed">
    <thead>
        <tr>
            <th>Title</th>
            <th>Day</th>
            <th>Room</th>
            <th>Track</th>
            <th>Start</th>
            <th>End</th>
        </tr>
    </thead>
    <tbody>
        <% @events.sort_by{|e| e.start_datetime }.each do |e| %>
        <tr>
            <td><%= l(e) %></td>
            <td><%= e.start_datetime.to_date.strftime('%a') %></td>
            <td><%= l($room_by_id[e.conference_room_id]) %></td>
            <td><%= l($track_by_id[e.conference_track_id]) %></td>
            <td><%= e.start_datetime.to_time.strftime('%H:%M') %></td>
            <td><%= e.end_datetime.to_time.strftime('%H:%M') %></td>
        <% end %>
    </tbody>
</table>
<% end %>
