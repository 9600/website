---
title: <%= name(@r) %>
kind: room
slug: <%= slug(@r) %>
room_id: <%= id(@r) %>
---
<dl class="dl-horizontal">
    <dt>Capacity:</dt>
    <dd><%= @r.size %></dd>
    <%
    $days.sort_by{|d| d.conference_day.to_date}.each do |day|
    events_that_day = @events.select{|e| e.start_datetime.to_date == day.conference_day.to_date}
    unless events_that_day.empty?
    s = events_that_day.sort_by{|e| e.start_datetime.to_time}.first.start_datetime.strftime('%H:%M')
    e = events_that_day.sort_by{|e| e.end_datetime.to_time}.last.end_datetime.strftime('%H:%M')
    t = events_that_day.map{|e| e.conference_track_id}.uniq.map{|id| $track_by_id[id]}.sort_by{|t| t.rank}
    %>
    <dt><%= day.name %>:</dt>
    <dd><%= s %>-<%= e %><% unless t.empty? %>: <%= l(t) %><% end %></dd>
    <% end %>
    <% end %>
</dl>

<% unless @events.empty? %>
<h3>Sessions</h3>
<table class="table table-striped table-bordered table-condensed">
    <thead>
        <tr>
            <th>Title</th>
            <th>Track</th>
            <th>Start</th>
            <th>End</th>
        </tr>
    </thead>
    <tbody>
        <% @events.sort_by{|e| e.start_datetime}.group_by{|e| e.start_datetime.to_date.strftime('%A')}.each do |day, dayevents| %>
        <tr>
            <td colspan="4"><h3><%= day %></h3></td>
        </tr>
        <% dayevents.sort_by{|e| e.start_datetime}.each do |e| %>
        <tr>
            <td><%= l(e) %></td>
            <td><%= l($track_by_id[e.conference_track_id]) %></td>
            <td><%= e.start_datetime.to_time.strftime('%H:%M') %></td>
            <td><%= e.end_datetime.to_time.strftime('%H:%M') %></td>
        </tr>
        <% end %>
        <% end %>
    </tbody>
</table>
<% end %>
