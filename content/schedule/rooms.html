---
title: Rooms
sponsors_under_navigation: true
---
<table class="table table-striped table-bordered table-condensed">
    <thead>
        <tr>
            <th>Room</th>
            <th>Seats</th>
            <% days.each do |d| %>
            <th><%= d[:title] %></th>
            <% end %>
        </tr>
    </thead>
    <tbody>
        <% rooms.reject{|r| r[:events].empty?}.each do |r| %>
        <tr>
            <td><%= l(r) %>
            <td><%= r[:size] %></td>
            <%
            days.each do |d|
            dayevents = r[:events_by_day].fetch(d[:slug].to_sym, []).map(&$to_event)
            %>
            <% if dayevents.empty? %>
            <td>-</td>
            <% else %>
            <%
            first = dayevents.map{|e| e[:start_time]}.sort.first
            last  = dayevents.map{|e| e[:end_time]}.sort.last
            daytracks = dayevents.map{|e| e[:track]}.uniq.map(&$to_track).sort_by{|t| [t[:start_time].fetch(d[:slug].to_sym), t[:rank], t[:conference_track_id]]}
            %>
            <td><%= first %>-<%= last %><% unless daytracks.empty? %>: <%= l daytracks, :name %><% end %></td>
            <% end %>
            <% end %>
        </tr>
        <% end %>
    </tbody>
</table>
